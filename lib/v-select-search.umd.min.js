(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["v-select-search"]=e():t["v-select-search"]=e()})("undefined"!==typeof self?self:this,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"2a71":function(t,e,i){},"6fa4":function(t,e,i){"use strict";var s=i("2a71"),o=i.n(s);o.a},"9fa2":function(t,e,i){"use strict";var s=i("da89"),o=i.n(s);o.a},da89:function(t,e,i){},fb15:function(t,e,i){"use strict";var s;(i.r(e),"undefined"!==typeof window)&&((s=window.document.currentScript)&&(s=s.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(i.p=s[1]));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"input-search-box",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[i("div",{ref:"searchbox",staticClass:"search-box",style:{width:t.width+"px"},on:{click:function(e){t.show=!t.show,t.textValue=""}}},[i("span",[t._v(t._s(t.title||"请选择"))]),i("i",{class:[{icon:!t.show},{iconActive:t.show}]})]),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"inputbox",staticClass:"input-box",style:{width:t.width+"px"}},[t.visibleInput?i("div",{staticClass:"inputStyle"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.textValue,expression:"textValue"}],ref:"inputblur",attrs:{type:"input",placeholder:"请输入搜索内容"},domProps:{value:t.textValue},on:{keyup:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchBtn(e):null},function(e){t.isFlag=!1}],focus:function(e){t.isFlag=!1},input:function(e){e.target.composing||(t.textValue=e.target.value)}}})]):t._e(),i("div",{staticClass:"data-list-box",style:{height:(t.data.length>10?t.scrollHeight:t.data.length<2?160:t.data.length*t.hLi)+"px"}},[t.data.length?i("div",{staticClass:"data-scroll"},[i("ul",{ref:"ulbox",staticClass:"ul-box",style:{height:t.data.length*t.hLi+"px",width:t.width+"px"},on:{mouseleave:t.leaveUl}},[t._t("default")],2),t.data.length>10?i("div",{staticClass:"scroll-box",style:{height:(t.data.length>10?t.scrollHeight:t.data.length*t.hLi)+"px"}},[i("scroll-into-view",{ref:"scrollInto"})],1):t._e()]):i("div",{staticClass:"tiptxt"},[t._v("暂无数据")])])])])],1)},l=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{class:[{"ct-option-li-active":t.index==t.$parent.itemIndex},"ct-option-li"],on:{mouseover:function(e){t.moveLi(t.index)},click:t.selectLi}},[t._v("\n    "+t._s(t.label)+"\n")])},r=[],a={name:"ct-option",inject:["select"],props:{value:{required:!0},label:[String,Number],index:[String,Number]},data(){return{}},mounted(){},methods:{moveLi(t){this.select.isCode_40_38&&!this.select.isMousemove&&(this.select.isCode_40_38=!1),this.select.isMousemove=!0,this.select.isCode_40_38||(this.select.itemIndex=t)},selectLi(){this.select.selectLiHandler()}}},h=a;i("6fa4");function u(t,e,i,s,o,l,n,r){var a,h="function"===typeof t?t.options:t;if(e&&(h.render=e,h.staticRenderFns=i,h._compiled=!0),s&&(h.functional=!0),l&&(h._scopeId="data-v-"+l),n?(a=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},h._ssrRegister=a):o&&(a=r?function(){o.call(this,this.$root.$options.shadowRoot)}:o),a)if(h.functional){h._injectStyles=a;var u=h.render;h.render=function(t,e){return a.call(e),u(t,e)}}else{var c=h.beforeCreate;h.beforeCreate=c?[].concat(c,a):[a]}return{exports:t,options:h}}var c=u(h,n,r,!1,null,"2573ecf1",null);c.options.__file="ct-option.vue";var d=c.exports,f={data(){return{el:"",ulbox:"",timer:null,isShow:0,li_scrollH:32,minHeight:10}},render(t){const e=t("div",{ref:"scroll",class:"scroll",style:{width:"60%",background:"#ccc",borderRadius:"4px",position:"absolute",left:"20%",opacity:this.isShow,transition:"opacity 0.8s ease-out","-moz-transition":"opacity 0.8s ease-out","-webkit-transition":"opacity 0.8s ease-out","-o-transition":"opacity 0.8s ease-out"},on:{mousedown:t=>{let e,i=t||window.event;i.preventDefault?i.preventDefault():i.returnValue=!1,e=t.clientY-this.el.offsetTop,document.onmousemove=(t=>{clearTimeout(this.timer),this.isShow=1;let i=t||window.event,s=i.clientY-e;s<=0&&(s=0),s>=this.$parent.scrollHeight-this.el.scrollHeight&&(s=this.$parent.scrollHeight-this.el.scrollHeight);let o=s/(this.$parent.scrollHeight-this.el.scrollHeight),l=o*(this.ulbox.clientHeight-this.$parent.scrollHeight);this.el.style.top=s+"px",this.ulbox.style.top=-l+"px"}),document.onmouseup=(t=>{this.isShow=0,document.onmousemove=null,document.onmouseup=null})}}},this.$slots.default);return e},mounted(){this.el=this.$refs.scroll,this.ulbox=this.$parent.$refs.ulbox;let t=window.navigator.userAgent.toLowerCase();-1!=t.indexOf("firefox")?this.ulbox.addEventListener("DOMMouseScroll",t=>{t.preventDefault();let e=0;e=t.detail<0?this.ulbox.offsetTop+this.li_scrollH:this.ulbox.offsetTop-this.li_scrollH,this.directionFn(e)},!1):this.ulbox.onmousewheel=(t=>{let e=t||window.event,i=0;e.preventDefault?e.preventDefault():e.returnValue=!1,i=e.wheelDelta>0?this.ulbox.offsetTop+this.li_scrollH:this.ulbox.offsetTop-this.li_scrollH,this.directionFn(i)})},methods:{directionFn(t){clearTimeout(this.timer),this.isShow=1,t>=0&&(t=0),t<=-(this.ulbox.clientHeight-this.$parent.scrollHeight)&&(t=-(this.ulbox.clientHeight-this.$parent.scrollHeight));let e=t/(this.ulbox.clientHeight-this.$parent.scrollHeight),i=e*(this.$parent.scrollHeight-this.el.clientHeight),s=this.$parent.scrollHeight-.5*(this.ulbox.clientHeight-this.$parent.scrollHeight);this.el.style.height=(s<=0?this.minHeight:s)+"px",this.ulbox.style.top=t+"px",this.el.style.top=-i+"px",this.timer=setTimeout(t=>{this.isShow=0},1e3)}}},p={name:"ct-select",components:{scrollIntoView:f},props:{width:{type:[String,Number],default:220},value:{type:[String,Number],default:""},visibleInput:{type:Boolean,default:!0},autoQuery:{type:Boolean,default:!1},delay:{type:Number,default:500},data:{type:Array}},data(){return{show:!1,itemIndex:-1,textValue:"",title:"",isCode_40_38:!1,scrollHeight:320,isMousemove:!1,hLi:32,isFlag:!0,timer:null}},provide(){return{select:this}},mounted(){document.onkeydown=(t=>{this.keyupChange(t)}),document.onclick=(t=>{this.show=!1}),window.addEventListener("resize",t=>{this.throttle(this.setStyle,300,1e3)}),this.setStyle()},methods:{moveLi(t){this.isCode_40_38&&!this.isMousemove&&(this.isCode_40_38=!1),this.isMousemove=!0,this.isCode_40_38||(this.itemIndex=t)},leaveUl(){this.$refs&&this.$refs.scrollInto&&(this.$refs.scrollInto.isShow=0),this.isCode_40_38=!1,this.isMousemove=!1},keyupChange(t){const e=t||window.event;this.data.length&&(40===e.keyCode&&(this.itemIndex===this.data.length-1?this.itemIndex=this.data.length-1:this.itemIndex++,(this.itemIndex+1)*this.hLi-Math.abs(this.$refs.ulbox.offsetTop)>this.scrollHeight&&(this.$refs.ulbox.style.top=-((this.itemIndex+1)*this.hLi-this.scrollHeight)+"px"),this.operationKey(e)),38===e.keyCode&&(this.isFlag=!0,this.isCode_40_38=!0,this.$refs.inputblur.blur(),0===this.itemIndex?this.itemIndex=0:this.itemIndex--,(this.itemIndex+1)*this.hLi-Math.abs(this.$refs.ulbox.offsetTop)<=0&&(this.$refs.ulbox.style.top=-(Math.abs(this.$refs.ulbox.offsetTop)-this.hLi)+"px"),this.operationKey(e)),13===e.keyCode&&-1!==this.itemIndex&&this.isCode_40_38&&this.isFlag&&this.selectLiHandler())},operationKey(t){if(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isFlag=!0,this.isCode_40_38=!0,this.$refs.inputblur.blur(),this.isMousemove&&this.data.length>10){this.$refs.scrollInto.isShow=1;let t=this.scrollHeight-.5*(this.$refs.ulbox.clientHeight-this.scrollHeight),e=this.itemIndex*this.hLi/this.$refs.ulbox.clientHeight,i=t<=0?this.$refs.scrollInto.minHeight:t,s=(this.data.length-1)*this.hLi==this.itemIndex*this.hLi?-(this.scrollHeight-i):-e*(this.scrollHeight-i);this.$refs.scrollInto.el.style.height=i+"px",this.$refs.scrollInto.el.style.top=-s+"px"}},selectLiHandler(){this.$emit("input",this.data[this.itemIndex]["value"]),this.title=this.data[this.itemIndex]["label"],this.textValue="",this.show=!1,this.isCode_40_38=!1},searchBtn(){this.textValue&&this.autoQuery&&this.reductionEmitVal()},reductionEmitVal(){this.itemIndex=-1,this.data.length&&(this.$refs.ulbox.style.top="0"),this.$emit("getSearchName",this.textValue)},setStyle(){this.$refs.inputbox&&(this.$refs.inputbox.style.top=this.$refs.searchbox.offsetTop+this.hLi+8+"px",this.$refs.inputbox.style.left=this.$refs.searchbox.offsetLeft+"px")},throttle(t,e,i){clearTimeout(t.timer),t._cur=Date.now(),t._start||(t._start=t._cur),t._cur-t._start>i?(t.apply(null,arguments),t._start=t._cur):t.timer=setTimeout(e=>{t.apply(null,arguments)},e)}},watch:{textValue(t){t&&!this.autoQuery&&(clearTimeout(this.timer),this.timer=setTimeout(t=>{this.reductionEmitVal()},this.delay))}}},m=p,x=(i("9fa2"),u(m,o,l,!1,null,"6c928f4c",null));x.options.__file="ct-select.vue";var v=x.exports;v.install=function(t){t.component(v.name,v)};var b=v;d.install=function(t){t.component(d.name,d)};var _=d;const g=[b,_],y=function(t){y.installed||g.map(e=>t.component(e.name,e))};"undefined"!==typeof window&&window.Vue&&y(window.Vue);var w={install:y,ctSelect:b,ctOption:_};e["default"]=w}})});
//# sourceMappingURL=v-select-search.umd.min.js.map